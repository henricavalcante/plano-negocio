<navigation></navigation>

<div class="col-md-9 col-sm-9" ng-if="!plano.passosConcluidos().plano05">
  <div name="div02" class="panel panel-default">
      <div class="panel-heading">
          <h3 class="panel-title">Você ainda não preencheu os passos anteriores!</h3>
      </div>

      <div class="panel-body">
        Preencha o passo anterior!
      </div>
  </div>
</div>

<div class="col-md-9 col-sm-9" ng-if="plano.passosConcluidos().plano05">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Passo 6 - Custos variáveis</h3>
    </div>

    <form name="plano.form06" class="panel-body">
      <h5><strong>Quais serão os custos variáveis de produção?</strong></h5>
      <help
        class="pull-right"
        explicacao="Aqui você descreverá os custos diretamente relacionados ao nível de atividade do empreendimento, como insumos, mercadorias e embalagens necessários para sua produção mensal.  Descreva também a unidade de compra, o preço unitário e a quantidade necessária."
        servico='<table class="table table-striped table-bordered"> <tr> <th colspan="5" class="text-center">CUSTOS VARIÁVEIS DE PRODUÇÃO</th> </tr> <tr> <td>Descrição dos insumos</td> <td>Unidade</td> <td>Preço Unitário (R$)</td> <td>Quantidade</td> <td>Custo Total (R$)</td> </tr> <tr> <td>Conexões</td> <td>peça</td> <td>5,60</td> <td>10,00</td> <td>65,00</td> </tr> <tr> <td>Válvulas de acesso</td> <td>peça</td> <td>5,60</td> <td>10,00</td> <td>58,00</td> </tr> <tr> <td>Mangueira</td> <td>metro</td> <td>5,00</td> <td>10,00</td> <td>50,00</td> </tr> <tr> <td>Tubo capilar de cobre</td> <td>metro</td> <td>25,00</td> <td>20,00</td> <td>500,00</td> </tr> <tr> <td>Filtros</td> <td>peça</td> <td>10,00</td> <td>10,00</td> <td>100,00</td> </tr> <tr> <td colspan="4">TOTAL</td> <td>773,00</td> </tr> </table>'
        industria='<table class="table table-striped table-bordered"> <tr> <th colspan="5" class="text-center">CUSTOS VARIÁVEIS DE PRODUÇÃO</th> </tr> <tr> <td>Descrição dos insumos</td> <td>Unidade</td> <td>Preço Unitário (R$)</td> <td>Quantidade</td> <td>Custo Total (R$)</td> </tr> <tr> <td>Parafina</td> <td>Kilo</td> <td>25,00</td> <td>15,00</td> <td>375,00</td> </tr> <tr> <td>Pavio</td> <td>Rolo</td> <td>20,00</td> <td>10,00</td> <td>200,00</td> </tr> <tr> <td>Cera micro</td> <td>Kilo</td> <td>12,00</td> <td>8,00</td> <td>96,00</td> </tr> <tr> <td>Vaselina</td> <td>Kilo</td> <td>6,00</td> <td>10,00</td> <td>60,00</td> </tr> <tr> <td>Corantes</td> <td>Kilo</td> <td>3,50</td> <td>12,00</td> <td>42,00</td> </tr> <tr> <td>Anilha</td> <td>Litro</td> <td>60,00</td> <td>0,50</td> <td>30,00</td> </tr> <tr> <td>Celofane</td> <td>Folhas</td> <td>0,65</td> <td>100,00</td> <td>65,00</td> </tr> <tr> <td colspan="4">TOTAL</td> <td>868,00</td> </tr> </table>'
        comercio='<table class="table table-striped table-bordered"> <tr> <th colspan="5" class="text-center">CUSTOS VARIÁVEIS DE PRODUÇÃO</th> </tr> <tr> <td>Descrição dos insumos</td> <td>Unidade</td> <td>Preço Unitário (R$)</td> <td>Quantidade</td> <td>Custo Total (R$)</td> </tr> <tr> <td>Tinta Latéx</td> <td>lata</td> <td>8,00</td> <td>20,00</td> <td>160,00</td> </tr> <tr> <td>Tinta Acrílica</td> <td>lata</td> <td>12,00</td> <td>15,00</td> <td>180,00</td> </tr> <tr> <td>Massa corrida</td> <td>lata</td> <td>6,00</td> <td>15,00</td> <td>90,00</td> </tr> <tr> <td>Masa Acrílica</td> <td>lata</td> <td>7,00</td> <td>15,00</td> <td>105,00</td> </tr> <tr> <td>Esmalte sintético</td> <td>lata</td> <td>2,50</td> <td>12,00</td> <td>30,00</td> </tr> <tr> <td>Rolos e trinchas</td> <td>peças</td> <td>3,50</td> <td>15,00</td> <td>52,50</td> </tr> <tr> <td>Resinas e vernizes</td> <td>latas</td> <td>6,50</td> <td>15,00</td> <td>97,50</td> </tr> <tr> <td>Lixas</td> <td>folhas</td> <td>0,35</td> <td>50,00</td> <td>17,50</td> </tr> <tr> <td>Solventes</td> <td>latas</td> <td>3,75</td> <td>15,00</td> <td>56,25</td> </tr> <tr> <td colspan="4">TOTAL</td> <td>788,75</td> </tr> </table>'>
      </help>
      <div class="clearfix"></div>
      <hr>
      <div class="row">
        <div class="form-group col-md-6">
          <label for="">Descrição</label>
          <input
            class="form-control"
            type="text"
            ng-model="custo.descricao"
            ng-required="true">
        </div>
        <div class="form-group col-md-2">
          <label for="">Unidade</label>
          <input
            class="form-control"
            type="text"
            maxlength="10"
            ng-model="custo.unidade"
            ng-required="true">
        </div>
        <div class="form-group col-md-2">
          <label for="">Quantidade</label>
          <input
            class="form-control"
            type="number"
            step="any"
            min="0"
            ng-model="custo.quantidade"
            ng-required="true">
        </div>
        <div class="form-group col-md-2">
          <label for="">Valor</label>
          <input
            class="form-control"
            type="number"
            step="any"
            min="0"
            ng-model="custo.valor"
            ng-required="true">
        </div>
      </div>

    <button
      class="btn btn-default"
      ng-disabled="plano.form06.$invalid"
      ng-click="plano.adicionarCusto(custo)"
      ng-hide="editMode">
      Adicionar
    </button>

    <a href="#"
      class="btn btn-danger"
      ng-click="plano.removerCusto(plano.dados.custos)"
      ng-if="plano.isCustoSelecionado(plano.dados.custos)"
      ng-hide="editMode">
      Remover
    </a>

    <a href="#"
      class="btn btn-primary"
      ng-click="plano.salvarCusto(custo)"
      ng-show="editMode">
      Salvar
    </a>

    <a href="#"
      class="btn btn-default"
      ng-click="plano.cancelarEdicaoCusto()"
      ng-show="editMode">
      Cancelar
    </a>
  </form>

  <table
    class="table table-striped table-bordered"
    ng-show="plano.dados.custos.length > 0">
    <tr>
      <th></th>
      <th>Descrição</th>
      <th>Unidade</th>
      <th>Quantidade</th>
      <th>Valor</th>
      <th>Total</th>
    </tr>
    <tr ng-repeat="i in plano.dados.custos">
      <td><input type="checkbox" ng-model="i.selecionado" ng-disabled="editMode"></td>
      <td>
        <a ng-hide="editMode" ng-click="plano.editarCusto(i)" href="#">{{i.descricao}}</a>
        <span ng-show="editMode">{{i.descricao}}</span>
      </td>
      <td>{{i.unidade}}</td>
      <td>{{i.quantidade}}</td>
      <td>{{i.valor | currency}}</td>
      <td>{{i.valor * i.quantidade | currency}}</td>
    </tr>
    <tr>
      <td colspan="5"><strong>Total geral:</strong></td>
      <td>{{plano.totalGeral(plano.dados.custos) | currency}}</td>
    </tr>
  </table>
  </div>
</div>
